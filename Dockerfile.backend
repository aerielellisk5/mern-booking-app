FROM node:latest

WORKDIR /app/backend

ENV MONGODB_CONNECTION_STRING=${MONGODB_CONNECTION_STRING}
ENV JWT_SECRET_KEY=${JWT_SECRET_KEY}
ENV FRONTEND_URL=${FRONTEND_URL}
ENV CLOUDINARY_CLOUD_NAME=${CLOUDINARY_CLOUD_NAME}
ENV CLOUDINARY_API_KEY=${CLOUDINARY_API_KEY}
ENV CLOUDINARY_API_SECRET=${CLOUDINARY_API_SECRET}

COPY ./backend/package.json /app/backend/package.json
COPY ./backend/src /app/backend/src

RUN yarn install

EXPOSE 9000

CMD ["npm", "run", "dev"]